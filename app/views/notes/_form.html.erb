<div class="max-w-3xl mx-auto">
  <div class="bg-white rounded-lg border border-gray-200 p-6">
    <%= form_with model: note, class: "space-y-4", data: { controller: "note-editor" } do |f| %>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">제목 <span class="text-gray-400">(선택)</span></label>
        <%= f.text_field :title, class: "w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm", placeholder: "노트 제목" %>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">내용</label>
        <%= f.text_area :content, rows: 15, class: "w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm font-mono", placeholder: "- 첫 번째 생각\n- [[다른 노트]]로 링크\n- #태그 추가\n  - 하위 생각", data: { note_editor_target: "content", action: "input->note-editor#contentChanged" } %>
        <p class="mt-1 text-xs text-gray-400">[[키워드]]로 링크, #태그로 태그를 추가할 수 있습니다. 저장 시 자동 추출됩니다.</p>
      </div>

      <div id="note-preview" data-note-editor-target="preview" class="hidden rounded-md border border-gray-200 p-4 text-sm bg-gray-50"></div>

      <div class="flex justify-end gap-2 pt-2">
        <%= link_to "취소", note.persisted? ? note_path(note) : notes_path, class: "rounded-md bg-white px-4 py-2 text-sm font-medium text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
        <%= f.submit note.persisted? ? "수정" : "저장", class: "rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-500 cursor-pointer" %>
      </div>
    <% end %>
  </div>
</div>
